# |------------------------|
# |        BACKPACK        |
# |------------------------|
# | Y  |    | Z1 |    | X1 |
# |-----    ------    -----|
# |                        |
# | ------          ------ |
# | | Z  |          | Z2 | |
# | ------          ------ |
# |-----              -----|
# | X  |              | Y1 |
# |------------------------|

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_330021000950315239323320-if00
restart_method: command

[temperature_sensor rpi]
sensor_type: temperature_host

[temperature_sensor mcu]
sensor_type: temperature_mcu

#virtual sdcard settings
[virtual_sdcard]
path: /home/pi/printer_data/gcodes

#enable display status for moonraker
[display_status]

# Enable Pause/Resume Functionality
[pause_resume]

[respond]

[gcode_arcs]

#Printer Speeds and Accels
[printer]
kinematics: cartesian
max_velocity: 500
max_accel: 30000 # change this to 7500 after commissioning
max_accel_to_decel: 30000
max_z_velocity: 15   # may be able to increase to 15 after comissioning.
max_z_accel: 500
square_corner_velocity: 15.0 # start at 8, but then increase once you're sure assembly is sound

[force_move]
enable_force_move: true

[exclude_object]

# [resonance_holder]

[include mainsail.cfg]
[include power.cfg]
[include toolhead.cfg]
[include xy_steppers.cfg]
[include z_steppers.cfg]
[include homing.cfg]
[include bed.cfg]
# [include probe.cfg]
[include beacon.cfg]
# [include crampon.cfg]
[include fans.cfg]
[include rebreather.cfg]
[include print_start.cfg]
[include print_end.cfg]
# [include nozzle_wipe.cfg]
[include macros.cfg]
[include K-ShakeTune/*.cfg]


# Miscellaneous config

[input_shaper]
shaper_freq_x: 91.0
shaper_type_x: zv
damping_ratio_x: 0.046
shaper_freq_y: 89.0
shaper_type_y: zv
damping_ratio_y: 0.033

[temperature_sensor chamber]
sensor_type: ATC Semitec 104GT-2
sensor_pin: PC1

[multi_pin chamber_led_pins]
pins: PB5,PB6

[output_pin chamber_leds]
pin: multi_pin:chamber_led_pins
pwm: true
cycle_time: 0.01
value: 0.5

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 20.519
#*# pid_ki = 1.471
#*# pid_kd = 71.559
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 30.982
#*# pid_ki = 1.679
#*# pid_kd = 142.904
#*#
#*# [dockable_probe]
#*# z_offset = 10.000
#*#
#*# [beacon model default]
#*# model_coef = 1.509274883934228,
#*# 	1.827487153004218,
#*# 	0.7262825943502088,
#*# 	0.37393575208080226,
#*# 	0.4288252450437323,
#*# 	0.2084695785817068,
#*# 	-0.2717295237421711,
#*# 	-0.07529546409038654,
#*# 	0.2081550791608132,
#*# 	0.06726811791542615
#*# model_domain = 3.223965766588169e-07,3.342999828772589e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 18.419386
#*# model_offset = -0.02000
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.027239, -0.024707, -0.023708, -0.022945, -0.028113, -0.031610, -0.034661, -0.040075, -0.042609, -0.045111, -0.048733, -0.050301, -0.052780, -0.051481, -0.048262, -0.046052, -0.040993, -0.034071, -0.027142, -0.023966, -0.023717, -0.023573, -0.020969, -0.019736, -0.020221
#*# 	  -0.013664, -0.012861, -0.014144, -0.014429, -0.020107, -0.023949, -0.028366, -0.030577, -0.034413, -0.036467, -0.039790, -0.044150, -0.044275, -0.042718, -0.039336, -0.037156, -0.032626, -0.026376, -0.021192, -0.018087, -0.017409, -0.016645, -0.015072, -0.015209, -0.012960
#*# 	  -0.007306, -0.007850, -0.007385, -0.008688, -0.012851, -0.017830, -0.021222, -0.024917, -0.028539, -0.029776, -0.034265, -0.035602, -0.038065, -0.036664, -0.033568, -0.031559, -0.027118, -0.022612, -0.018254, -0.015487, -0.015383, -0.014001, -0.012904, -0.008811, -0.007418
#*# 	  -0.003771, -0.003323, -0.004024, -0.004726, -0.007912, -0.012393, -0.015627, -0.018173, -0.021477, -0.023422, -0.027235, -0.030516, -0.032496, -0.031411, -0.028427, -0.026948, -0.024464, -0.019080, -0.014961, -0.013771, -0.011688, -0.013411, -0.010361, -0.005649, -0.004669
#*# 	  0.000112, 0.001820, 0.001883, 0.001727, -0.003955, -0.009897, -0.012917, -0.014356, -0.016854, -0.017761, -0.023075, -0.029403, -0.030263, -0.026873, -0.025591, -0.027515, -0.023096, -0.018855, -0.013113, -0.009433, -0.010873, -0.008972, -0.006085, -0.000824, -0.001859
#*# 	  0.003058, 0.007219, 0.006997, 0.004064, -0.001680, -0.005861, -0.008058, -0.010475, -0.012198, -0.013191, -0.018859, -0.024178, -0.025211, -0.026090, -0.021151, -0.019949, -0.017968, -0.012970, -0.009270, -0.006540, -0.005503, -0.004390, -0.002837, 0.001662, 0.001586
#*# 	  0.009355, 0.010491, 0.008025, 0.005540, 0.000150, -0.003937, -0.004377, -0.005406, -0.007544, -0.008579, -0.014879, -0.021165, -0.022499, -0.020699, -0.017205, -0.016305, -0.014709, -0.008509, -0.005205, -0.003984, -0.001824, -0.001491, 0.000236, 0.002524, 0.002753
#*# 	  0.012616, 0.014079, 0.013427, 0.011636, 0.007618, 0.004015, 0.001543, -0.000590, -0.004635, -0.007439, -0.012294, -0.016977, -0.020324, -0.019650, -0.012662, -0.010837, -0.009196, -0.002020, 0.001053, 0.002221, 0.003591, 0.004055, 0.002600, 0.004232, 0.005020
#*# 	  0.014393, 0.016428, 0.016870, 0.014443, 0.010374, 0.006933, 0.004601, -0.001738, -0.006045, -0.008009, -0.012730, -0.017781, -0.018421, -0.016642, -0.014018, -0.011790, -0.007178, -0.000401, 0.002425, 0.003620, 0.005459, 0.004785, 0.004120, 0.006022, 0.004480
#*# 	  0.017958, 0.021110, 0.021271, 0.018774, 0.016267, 0.012160, 0.006558, -0.000180, -0.004269, -0.006057, -0.008894, -0.013387, -0.015862, -0.014880, -0.011845, -0.010038, -0.004039, 0.003692, 0.005253, 0.006714, 0.007163, 0.007036, 0.007155, 0.009599, 0.007817
#*# 	  0.020217, 0.021849, 0.022686, 0.021688, 0.018512, 0.012984, 0.008554, 0.002181, -0.005296, -0.005806, -0.009102, -0.014402, -0.017425, -0.015747, -0.012816, -0.009939, -0.003382, 0.002292, 0.006105, 0.008031, 0.007076, 0.007565, 0.008697, 0.008468, 0.007957
#*# 	  0.019293, 0.021518, 0.021097, 0.020991, 0.018040, 0.012509, 0.008157, 0.002665, -0.005777, -0.006722, -0.008363, -0.013807, -0.014380, -0.013479, -0.011206, -0.010349, -0.006363, 0.003370, 0.006972, 0.006701, 0.007166, 0.007070, 0.008817, 0.010560, 0.008325
#*# 	  0.018951, 0.019846, 0.022132, 0.023530, 0.020195, 0.015643, 0.011025, 0.003857, -0.003864, -0.006208, -0.007235, -0.009960, -0.012117, -0.010701, -0.007762, -0.005181, -0.000745, 0.002691, 0.008481, 0.008630, 0.007112, 0.007682, 0.009744, 0.008937, 0.009855
#*# 	  0.018202, 0.022299, 0.026032, 0.025870, 0.022446, 0.017791, 0.010103, 0.003484, -0.000328, -0.001301, -0.004097, -0.006827, -0.008399, -0.006664, -0.003500, -0.001528, 0.000850, 0.004365, 0.007332, 0.008213, 0.008366, 0.009526, 0.007826, 0.008427, 0.009018
#*# 	  0.020170, 0.024935, 0.025487, 0.026544, 0.026112, 0.019097, 0.015018, 0.008489, 0.003579, 0.002135, -0.000178, -0.002720, -0.005567, -0.003747, -0.000341, 0.000110, 0.002500, 0.007412, 0.009327, 0.009090, 0.010031, 0.010086, 0.010232, 0.010296, 0.007642
#*# 	  0.021353, 0.024074, 0.026511, 0.028702, 0.025990, 0.020276, 0.015392, 0.011391, 0.005840, 0.004604, 0.002146, -0.000354, -0.001738, 0.000425, 0.002925, 0.001921, 0.006455, 0.008957, 0.011212, 0.012221, 0.013000, 0.012522, 0.012574, 0.011166, 0.008819
#*# 	  0.021862, 0.025104, 0.028953, 0.027778, 0.023169, 0.018774, 0.015399, 0.011891, 0.008608, 0.006326, 0.003773, 0.000785, 0.001279, 0.002540, 0.003044, 0.003523, 0.006879, 0.012209, 0.012860, 0.012755, 0.013327, 0.013031, 0.012409, 0.012918, 0.010347
#*# 	  0.021753, 0.024213, 0.024674, 0.023806, 0.023015, 0.020775, 0.017196, 0.012108, 0.008276, 0.006184, 0.005629, 0.001382, 0.002630, 0.001467, 0.000209, 0.004234, 0.006249, 0.009868, 0.011650, 0.012338, 0.013393, 0.013807, 0.013455, 0.013185, 0.010779
#*# 	  0.020991, 0.021220, 0.020819, 0.021837, 0.020277, 0.017762, 0.015957, 0.008925, 0.005063, 0.004356, 0.003997, 0.002305, 0.000536, 0.000790, 0.002425, 0.002465, 0.005139, 0.009861, 0.010638, 0.010317, 0.010148, 0.011026, 0.013519, 0.012514, 0.012343
#*# 	  0.018562, 0.019978, 0.019432, 0.018455, 0.016603, 0.013823, 0.010991, 0.006638, 0.003279, 0.002714, 0.000926, -0.000148, -0.000413, -0.000274, -0.000475, -0.001453, 0.005123, 0.006967, 0.008947, 0.010008, 0.010607, 0.010813, 0.009590, 0.010523, 0.010299
#*# 	  0.015346, 0.016904, 0.018236, 0.015662, 0.011837, 0.009892, 0.006958, 0.002877, -0.002474, -0.001341, -0.001154, -0.001914, -0.004311, -0.006049, -0.006766, -0.004491, 0.000580, 0.002980, 0.006468, 0.006433, 0.006360, 0.007347, 0.008713, 0.007729, 0.010076
#*# 	  0.014380, 0.016418, 0.017233, 0.014952, 0.010954, 0.007565, 0.003108, -0.001491, -0.005038, -0.003477, -0.002681, -0.005124, -0.007783, -0.009292, -0.009212, -0.006485, -0.001896, 0.003115, 0.006918, 0.008023, 0.007092, 0.008255, 0.009786, 0.011908, 0.012163
#*# 	  0.015270, 0.016748, 0.016805, 0.013346, 0.007326, 0.004064, 0.000441, -0.004479, -0.005388, -0.004237, -0.005094, -0.008844, -0.012166, -0.012773, -0.009236, -0.007983, -0.002504, 0.002736, 0.006763, 0.007478, 0.008831, 0.011223, 0.012664, 0.013016, 0.013614
#*# 	  0.012781, 0.013518, 0.011651, 0.008736, 0.004024, -0.000473, -0.003835, -0.006143, -0.009181, -0.009455, -0.010760, -0.013382, -0.013568, -0.013471, -0.009905, -0.007077, -0.000514, 0.004296, 0.006962, 0.007484, 0.009494, 0.011966, 0.012799, 0.013764, 0.015652
#*# 	  0.008870, 0.009777, 0.009165, 0.004295, -0.002989, -0.006949, -0.009064, -0.011222, -0.015040, -0.015367, -0.016326, -0.018117, -0.019690, -0.017850, -0.013118, -0.009247, -0.003912, 0.000693, 0.004599, 0.005410, 0.007632, 0.009379, 0.011210, 0.011858, 0.013440
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 0
#*# mesh_y_pps = 0
#*# algo = direct
#*# tension = 0.2
#*# min_x = 25.0
#*# max_x = 150.0
#*# min_y = 20.0
#*# max_y = 160.0
#*#
#*# [beacon model hb_smooth_pei]
#*# model_coef = 1.5243962449187467,
#*# 	  1.865993354022321,
#*# 	  0.757604885262961,
#*# 	  0.24310281852416005,
#*# 	  0.27587166403283675,
#*# 	  0.5200552250427075,
#*# 	  -0.06570960451048638,
#*# 	  -0.4348229893398542,
#*# 	  0.10911261520382366,
#*# 	  0.20814584046540774
#*# model_domain = 3.238816539665741e-07,3.3460060308090277e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 34.396532
#*# model_offset = 0.00000
#*#
#*# [beacon model hb_textured_pei]
#*# model_coef = 1.509274883934228,
#*# 	1.827487153004218,
#*# 	0.7262825943502088,
#*# 	0.37393575208080226,
#*# 	0.4288252450437323,
#*# 	0.2084695785817068,
#*# 	-0.2717295237421711,
#*# 	-0.07529546409038654,
#*# 	0.2081550791608132,
#*# 	0.06726811791542615
#*# model_domain = 3.223965766588169e-07,3.342999828772589e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 18.419386
#*# model_offset = -0.02000
